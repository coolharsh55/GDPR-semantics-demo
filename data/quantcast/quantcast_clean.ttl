@prefix : <http://example.com/Quantcast#> .
@prefix ex: <http://example.com/> .
@prefix gc: <https://w3id.org/GConsent#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix gdprov: <https://w3id.org/GDPRov#> .
@prefix gdprtext: <https://w3id.org/GDPRtEXT#> .
@prefix gdpr: <https://w3id.org/GDPRtEXT/gdpr#> .
@base <http://example.com/Quantcast> .

<http://example.com/Quantcast> a owl:Ontology ;
	rdfs:label "Quantcast Ontology"@en ;
	rdfs:comment "Ontology and Data for Quantcast GDPR use-case"@en .


<https://quantcast.com> a gdprov:Controller ;
	rdfs:label "Quantcast"@en ;
	rdfs:comment "Quantcast is an American technology company, founded in 2006, that specializes in AI-driven real-time advertising, audience insights & measurement."@en .

:DPO a gdprov:DPO ;
	rdfs:label "DPO" ;
	rdfs:comment "Data Protection Officer for Quantcast International Limited" ;
	rdfs:seeAlso <https://www.quantcast.com/privacy/#contact-legal> .

#TODO: rights

############ PERSONAL DATA ############

:Cookie a gdprov:Data ;
	rdfs:label "Cookie"@en ;
	rdfs:comment "A cookie is a small file containing a string of characters that is sent to your computer when you visit a website. Cookies typically are used to store user preferences or IDs. See our FAQ for more information about cookies and how they work. The user does not have to use cookies, but if the user does not accept cookies, they may not be able to use all portions of Quantcast.com or all functionality of the Services (as defined below)."@en ;
	rdfs:seeAlso <https://www.quantcast.com/faq/quantcast-services/> .

:Tag a gdprov:Data ;
	rdfs:label "Tag"@en ;
	rdfs:comment "A tag is a tiny snippet of code inserted into a Partner’s website content that is used to collect data related to a website visit. Similar functionality is enabled in a Partner’s mobile app through the use of an SDK (Software Development Kit). When a user views a Partner’s site or uses a Partner’s app, our servers are notified, and we are able to collect information from the browser or application. See our FAQ for more information about our Tags and SDKs."@en ;
	rdfs:seeAlso <https://www.quantcast.com/faq/quantcast-services/> .

:LogData a gdprov:PersonalData ;
	rdfs:label "Log Data"@en ;
	rdfs:comment "Log Data includes (1) information sent to us by browsers that encounter our Tags, including, for example, browser type, browser time, time of access, screen resolution, IP address, referring site URL, current site URL, and search strings; (2) information sent to us by advertising exchanges in the form of bid requests, which may include the information above as well as information like auction identifiers, for the purpose of soliciting bids to place online ads; and (3) information received from the Quantcast SDK embedded in mobile apps, which may include the above as well as information like device identifier, location information, application data and usage information, and unique application and installation identifiers."@en ;
	gdprov:hasStorageDuration [ a time:DurationDescription; time:months "6"^^xsd:decimal ] ;
	rdfs:seeAlso <https://www.quantcast.com/faq/quantcast-services/> ;
	rdfs:seeAlso :Tag .

:Email a gdprov:PersonalData ;
	rdfs:label "email"@en .

:UserID a gdprov:UserIdentifier, gdprov:PersonalData ;
	rdfs:label "User ID (cookie ID)" ;
	rdfs:comment "Is the unique ID set for users based on cookies" .

:WebsiteHistory a gdprov:PersonalData ;
	rdfs:label "website history of user" .
:AppsUsedByUser a gdprov:PersonalData ;
	rdfs:label "apps used by user" .

:PrivacyNotices a gdprov:PersonalData ;
	rdfs:label "Privacy Notices" ;
	rdfs:comment "Privacy Notices generated or shown to the user" .

:PrivacyChoices a gdprov:PersonalData ;
	rdfs:label "Privacy Choices" ;
	rdfs:comment "Privacy Choices made by the user in the consent dialog" .


:Demographics rdfs:subClassOf gdprov:PersonalData ;
	rdfs:label "Demographics" .

# QMeasure uses these
#Age
:AgeProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "Age Profile" ;
	rdfs:comment "derived from analysed data" .
#Gender
:GenderProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "Gender Profile" ;
	rdfs:comment "derived from analysed data" .
#Family
:FamilyProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "Family Profile" ;
	rdfs:comment "derived from analysed data" .
#Education
:EducationProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "Education Profile" ;
	rdfs:comment "derived from analysed data" .
#Occupation
:OccupationProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "Occupation Profile" ;
	rdfs:comment "derived from analysed data" .
#Ethnicity
:EthnicityProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "Ethnicity Profile";
	rdfs:comment "derived from analysed data" .
#HouseholdIncome
:HouseholdIncomeProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "HouseholdIncomeProfile" ;
	rdfs:comment "derived from analysed data" .
#PoliticalAffiliation
:PoliticalAffiliationProfile a :Demographics, gdprov:PersonalData ;
	rdfs:label "PoliticalAffiliationProfile" ;
	rdfs:comment "derived from analysed data" .
#What they drive
:DrivingProfile a gdprov:PersonalData ;
	rdfs:label "Driving Profile" ;
	rdfs:comment "derived from analysed data" .

# QMeasure uses these
:Psychographics rdfs:subClassOf gdprov:PersonalData ;
	rdfs:label "Demographics" .
#Shopping Interests
:ShoppingInterestsProfile a :Psychographics, gdprov:PersonalData ;
	rdfs:label "Shopping Interests Profile" ;
	rdfs:comment "derived from analysed data" .
#Media Interests
:MediaInterestsProfile a :Psychographics, gdprov:PersonalData ;
	rdfs:label "Media Interests Profile" ;
	rdfs:comment "derived from analysed data" .
#Business & Occupation
:BusinessOccupationProfile a :Psychographics, gdprov:PersonalData ;
	rdfs:label "Business & Occupation Profile" ;
	rdfs:comment "derived from analysed data" .
#Geography
:GeographyProfile a :Psychographics, gdprov:PersonalData ;
	rdfs:label "Geography Profile" ;
	rdfs:comment "derived from analysed data" .
#Political Interests
:PoliticalInterestsProfile a :Psychographics, gdprov:PersonalData ;
	rdfs:label "Political Interests Profile" ;
	rdfs:comment "derived from analysed data" .
#BuyingInterests
:BuyingInterestsProfile a :Psychographics, gdprov:PersonalData ;
	rdfs:label "Political Interests Profile" ;
	rdfs:comment "derived from analysed data" .

:UserProfile a gdprov:UserProfile ;
	rdfs:label "User Profile" ;
	rdfs:comment "a profile of the user consisting of various attributes" .

:BuyingHistory a gdprov:PersonalData ;
	rdfs:label "Buying History" ;
	rdfs:comment "buying history of users" .
:MediaHistory a gdprov:PersonalData ;
	rdfs:label "Media History" ;
	rdfs:comment "media consumption history of users" .

############ PROCESS ############

:Marketting a gdprov:Process ;
	rdfs:label "Marketting"@en ;
	rdfs:comment "Quantcast newsletters, marketing, or promotional materials"@en .

:MonitorAnalyseImproveServices a gdprov:Process ;
	rdfs:label "Monitor, Analyse, and Improve Services" ;
	gdprov:hasLegalBasis gdprtext:LegitimateInterest .

:QAdvertise a gdprov:Process ;
	rdfs:label "Quantcast Advertise Services" ;
	gdprov:hasLegalBasis gdprtext:LegitimateInterest .

:QMeasure a gdprov:Process ;
	rdfs:leabel "Quantcast Measure Services" ;
	gdprov:hasLegalBasis gdprtext:LegitimateInterest .

:QChoice a gdprov:Process ;
	rdfs:label "Quantcast Choice" ;
	rdfs:comment "Consent Management Framework following IAB consent framework" ;
	gdprov:hasLegalBasis gdprtext:LegitimateInterest .

############ STEPS ############

# user interaction activities
# not part of any process
:visitWebsite a gdprov:UserInteractionStep, gdprov:DataCollectionStep ;
	rdfs:label "visit Quantcast website"@en ;
	rdfs:comment "The activity that takes place when an user visits the Quantcast.com website"@en ;
	gdprov:generatesData :Cookie, :Tag, :LogData , :PrivacyNotices, :PrivacyChoices .

:visitPartnerWebsite a gdprov:DataStep, gdprov:DataCollectionStep ;
	rdfs:label "visit Quantcast Partner website"@en ;
	rdfs:comment "The activity that takes place when an user visits Quantcast Partner's website"@en ;
	gdprov:generatesData :Cookie, :Tag, :LogData ;
	gdprov:generatesData :WebsiteHistory, :AppsUsedByUser , :PrivacyChoices, :PrivacyNotices .

:receiveEmailQuery a gdprov:DataStep, gdprov:DataCollectionStep, gdprov:UserInputStep ;
	rdfs:label "receive Email query"@en ;
	rdfs:comment "If you contact us by email, we keep a record of your contact information and correspondence for as long as necessary to deal with your correspondence and the issues you raised. If you provide contact information to us, we may use that information to contact you with Quantcast newsletters, marketing, or promotional materials. If you decide at any time that you no longer wish to receive such communications from us, please follow the unsubscribe instructions provided in any of the communications."@en ;
	gdprov:generatesData :Email .

# marketting process
:sendMarkettingMaterial a gdprov:DataStep, gdprov:UserOutputStep, gdprov:DataUsageStep ;
	rdfs:label "send marketting material"@en ;
	rdfs:comment "sends marketting material to available addresses";
	gdprov:isPartOfProcess :Marketting ;
	gdprov:usesData :Email .

# MonitorAnalyseImproveServices process
:MonitorServices a gdprov:DataStep, gdprov:DataUsageStep ;
	rdfs:label "Monitor Services"@en ;
	gdprov:isPartOfProcess :MonitorAnalyseImproveServices ;
	gdprov:usesData :LogData .
:AnalyseServices a gdprov:DataStep, gdprov:DataUsageStep ;
	rdfs:label "Analyse Services"@en ;
	gdprov:isPartOfProcess :MonitorAnalyseImproveServices ;
	gdprov:usesData :LogData .
:ImproveServices a gdprov:DataStep, gdprov:DataUsageStep ;
	rdfs:label "Improve Services"@en ;
	gdprov:isPartOfProcess :MonitorAnalyseImproveServices ;
	gdprov:usesData :LogData .
:ImproveAccuracyOfProducts a gdprov:DataStep, gdprov:DataUsageStep ;
	rdfs:label "Improve accuracy of products"@en ;
	gdprov:isPartOfProcess :MonitorAnalyseImproveServices ;
	gdprov:usesData :LogData, :WebsiteHistory, :AppsUsedByUser .


:extractIdentifierFromLogData a gdprov:DataStep, gdprov:DataUsageStep, gdprov:DataStorageStep ;
	rdfs:label "extract identifier from Log Data";
	gdprov:usesData :LogData ;
	gdprov:generatesData :UserID .

# QAdvertise process
:DetermineAdvertisements a gdprov:DataStep, gdprov:DataUsageStep ;
	rdfs:label "Determines ads"@en ;
	gdprov:isPartOfProcess :QAdvertise ;
	gdprov:usesData :LogData, :WebsiteHistory, :AppsUsedByUser .

:ImproveAccuracyOfAdvertisements a gdprov:DataStep, gdprov:DataUsageStep ;
	rdfs:label "Improve accuracy of advertisements"@en ;
	gdprov:isPartOfProcess :QAdvertise ;
	gdprov:usesData :LogData, :WebsiteHistory, :AppsUsedByUser .

:GuessAssociationBetweenPlatforms a gdprov:DataStep ;
	rdfs:label "Guess association between platforms and devices" ;
	rdfs:comment "guesses association between different platforms and devices for the same user";
	gdprov:isPartOfProcess :QAdvertise .

:CollectDataFromThirdParties a gdprov:DataCollectionStep ;
	rdfs:label "Collect Data from Third Parties" ;
	rdfs:comment "Collects data from partners and third parties" ;
	gdprov:collectsDataFromAgent :Experian, :MasterCard, :DLX, :TiVO, :Netwise ;
	gdprov:collectsData :BuyingHistory, :MediaHistory .

# QMeasure + QAdvertise process
:QuantcastAudienceGrid a gdprov:DataStep, gdprov:DataStorageStep, gdprov:DataUsageStep ;
	rdfs:label "Quantcast Audience Grid" ;
	rdfs:comment "combine data from multiple third-parties to create user profiles" ;
	# https://www.quantcast.com/products/measurement/ Demographics
	gdprov:usesData :WebsiteHistory, :Cookie, :AppsUsedByUser ;
	gdprov:usesData :BuyingHistory, :MediaHistory ;
	gdprov:generatesData :GenderProfile, :AgeProfile, :FamilyProfile, :EducationProfile, :EthnicityProfile, :HouseholdIncomeProfile, :PoliticalAffiliationProfile ;
	# https://www.quantcast.com/products/measurement/ Audience Interests
	gdprov:generatesData :BuyingInterestsProfile, :ShoppingInterestsProfile, :DrivingProfile, :MediaInterestsProfile ;
	gdprov:isPartOfProcess :QMeasure, :QAdvertise .

############ THIRD PARTY ############

:Experian a gdprov:ThirdParty ;
	rdfs:label "Experian" .
:MasterCard a gdprov:ThirdParty ;
	rdfs:label "MasterCard" .
:DLX a gdprov:ThirdParty ;
	rdfs:label "DLX" .
:TiVO a gdprov:ThirdParty ;
	rdfs:label "TiVO" .
:Netwise a gdprov:ThirdParty ;
	rdfs:label "Netwise" .

############ THIRD PARTY INIT ############

# Information storage and access
:InformationStorageAccess a gdprov:Process, gc:Purpose ;
	rdfs:label "Information, Storage, and Access";
	rdfs:comment "The storage of information, or access to information that is already stored, on your device such as advertising identifiers, device identifiers, cookies, and similar technologies." .
# TODO: add consent properties
# processing - collect, storage, usage
# personal data - advertising identifiers, device identifiers, cookies
# legal basis - consent

:ShareDataWithInfoPartners a gdprov:DataSharingStep, gc:DataSharing ;
	rdfs:label "Share data for info, storage, access with specified partners" ;
	gc:sharesDataWithThirdParty ;
	gdprov:isPartOfProcess :InformationStorageAccess ;

:Personalisation a gdprov:Process, gc:Purpose ;
	rdfs:label "Personalisation" ;
	rdfs:comment "The collection and processing of information about your use of this service to subsequently personalise advertising and/or content for you in other contexts, such as on other websites or apps, over time. Typically, the content of the site or app is used to make inferences about your interests, which inform future selection of advertising and/or content." .
# TODO: add consent properties
# processing - collection, storage, usage
# personal data - N/A
# legal basis - consent

:AdSelectionDeliveryReporting a gdprov:Process, gc:Purpose ;
	rdfs:label "Ad selection, delivery, reporting" ;
	rdfs:comment "The collection of information, and combination with previously collected information, to select and deliver advertisements for you, and to measure the delivery and effectiveness of such advertisements. This includes using previously collected information about your interests to select ads, processing data about what advertisements were shown, how often they were shown, when and where they were shown, and whether you took any action related to the advertisement, including for example clicking an ad or making a purchase. This does not include personalisation, which is the collection and processing of information about your use of this service to subsequently personalise advertising and/or content for you in other contexts, such as websites or apps, over time." .
# TODO: add consent properties
# processing - collection, storage, usage, combine
# personal data - interests, ads shown, actions on ads, purchase history
# legal basis - consent

:Measurement a gdprov:Process, gc:Purpose ;
	rdfs:label "Measurement" ;
	rdfs:comment "The collection of information about your use of the content, and combination with previously collected information, used to measure, understand, and report on your usage of the service. This does not include personalisation, the collection of information about your use of this service to subsequently personalise content and/or advertising for you in other contexts, i.e. on other service, such as websites or apps, over time." .
# TODO: add consent properties
# processing - collect, combine, store, use, analyse
# personal data - N/A
# legal basis - consent


############ CONSENT ############


:ConsentRequestDialog a gdprov:ConsentAgreementTemplateBundle
	rdfs:label "Consent Dialog shown to the user" ;
	rdfs:comment "Dialog that shows - We value your privacy. We and our partners use technology such as cookies on our site to personalise content and ads, provide social media features, and analyse our traffic. Click below to consent to the use of this technology across the web. You can change your mind and change your consent choices at anytime by returning to this site. If the user clicks on 'I Agree' then the dialog is closed, and all choices are considered as having agreed to. Alternatively, the user can customise their choice by clicking on 'Show Purposes'." ;
	# TODO: Generate these consentagreements using GC
	gdprov:usesConsentAgreementTemplate :CATQInfoStorageAccess, :CATQPersonalise, CATQAds, CATQMeasure, CATTPInfoStorageAccess, CATTPPersonalise, CATTPAds, CATTPContentSelection, CATTPMeasure, CATTPGoogle .
	# TODO: specify right to withdraw or change


:GivenConsent a gc:Consent, gdprov:ConsentAgreement ;
	rdfs:label "Given consent of the user" ;
	rdfs:comment "This consent only indicates the consent choices of the data subject, and does not indicate that the data subject has 'consented' or 'accepted' the choices offered." .

:ChangedConsent a gc:Consent, gdprov:ConsentAgreement ;
	rdfs:label "Changed consent of the user" ;
	rdfs:comment "This consent only indicates the consent choices of the data subject, and does not indicate that the data subject has 'consented' or 'accepted' the choices offered." .

# QChoice process
:GetConsent a gdprov:DataStep, gdprov:DataStorageStep, gdprov:ConsentAcquisitionStep, gdprov:UserInteractionStep ;
	rdfs:label "Get Consent" ;
	rdfs:comment "Shows a dialog to the user, and gets consent. Analyses presented privacy notices and choices." ;
	gdprov:isPartOfProcess :QChoice ;
	gdprov:usesConsentAgreementTemplateBundle :ConsentRequestDialog ;
	gdprov:generatesData :PrivacyNotices, :PrivacyChoices ;
	gdprov:generatesConsentAgreement :GivenConsent .

:ChangeConsent a gdprov:DataStep, gdprov:ConsentModificationStep, gdprov:UserInteractionStep ;
	rdfs:label "Change Consent" ;
	rdfs:comment "Consent choices can be changed by clicking on the 'Change Consent' button at the bottom of the page." ;
	gdprov:isPartOfProcess :QChoice ;
	gdprov:usesConsentAgreementTemplateBundle :ConsentRequestDialog ;
	gdprov:generatesData :PrivacyNotices, :PrivacyChoices ;
	gdprov:usesConsentAgreement :GivenConsent .
	gdprov:generatesConsentAgreement :ChangedConsent .